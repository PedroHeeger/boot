# Forma√ß√£o Cybersec - Labs M√≥dulo 3   <img src="../0-aux/logo_boot.png" alt="boot_035" width="auto" height="45">

### Repository: [boot](../../../../)   
### Platform: <a href="../../../">vnw   <img src="https://github.com/PedroHeeger/my_tech_journey/blob/main/platforms/img/vnw.jpeg" alt="vnw" width="auto" height="25"></a>
### Software/Subject: <a href="../../">cybersecurity   <img src="https://github.com/PedroHeeger/main/blob/main/0-aux/logos/content/cybersecurity.jpg" alt="cybersecurity" width="auto" height="25"></a>
### Bootcamp: <a href="../">boot_035 (Forma√ß√£o Cybersec)   <img src="../0-aux/logo_boot.png" alt="boot_035" width="auto" height="25"></a>
### Module: 3. Ethical Hacking (Red Team)

#### <a href="./README.md">Teoria</a>

---

Esta pasta refere-se aos laborat√≥rios do m√≥dulo 3 **Ethical Hacking (Red Team)** do bootcamp [**Forma√ß√£o Cybersec**](../).

### Theme:
- Cybersecurity

### Used Tools:
- Operating System (OS): 
  - Linux   <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/linux/linux-original.svg" alt="linux" width="auto" height="25">
  - Windows 11   <img src="https://github.com/PedroHeeger/main/blob/main/0-aux/logos/software/windows11.png" alt="windows11" width="auto" height="25">
- Linux Distribution:
  - Ubuntu   <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/ubuntu/ubuntu-plain.svg" alt="ubuntu" width="auto" height="25">
- Cloud:
  - AWS   <img src="https://cdn.jsdelivr.net/gh/devicons/devicon@latest/icons/amazonwebservices/amazonwebservices-original-wordmark.svg" alt="aws" width="auto" height="25">
- Cloud Services:
  - Amazon Elastic Compute Cloud (EC2)   <img src="https://github.com/PedroHeeger/main/blob/main/0-aux/logos/cloud/aws_ec2.svg" alt="aws_ec2" width="auto" height="25">
  - Google Drive   <img src="https://github.com/PedroHeeger/main/blob/main/0-aux/logos/software/google_drive.png" alt="google_drive" width="auto" height="25">
- Containerization: 
  - Docker   <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/docker/docker-original.svg" alt="docker" width="auto" height="25">
  - Docker Compose   <img src="https://github.com/PedroHeeger/main/blob/main/0-aux/logos/software/docker_compose.png" alt="docker_compose" width="auto" height="25">
  - Docker Playground; Play With Docker (PWD)   <img src="https://github.com/PedroHeeger/main/blob/main/0-aux/logos/sites/docker_playground.jpg" alt="docker_playground" width="auto" height="25">
- Build Automation:
  - Make   <img src="" alt="make" width="auto" height="25">
- Language:
  - HTML   <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/html5/html5-original.svg" alt="html" width="auto" height="25">
  - Markdown   <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/markdown/markdown-original.svg" alt="markdown" width="auto" height="25">
- Integrated Development Environment (IDE) and Text Editor:
  - Nano   <img src="https://github.com/PedroHeeger/main/blob/main/0-aux/logos/software/nano.png" alt="nano" width="auto" height="25">
  - Vi   <img src="https://github.com/PedroHeeger/main/blob/main/0-aux/logos/software/vi.png" alt="vi" width="auto" height="25">
  - VI iMproved (Vim)   <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/vim/vim-original.svg" alt="vim" width="auto" height="25">
  - Visual Studio Code (VS Code)   <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/vscode/vscode-original.svg" alt="vscode" width="auto" height="25">
- Versioning: 
  - Git   <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/git/git-original.svg" alt="git" width="auto" height="25">
- Repository:
  - GitHub   <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/github/github-original.svg" alt="github" width="auto" height="25">
- Command Line Interpreter (CLI):
  - AWS Command Line Interface (CLI)   <img src="https://github.com/PedroHeeger/main/blob/main/0-aux/logos/cloud/aws_cli.svg" alt="aws_cli" width="auto" height="25">
  - Bash e Sh   <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/bash/bash-original.svg" alt="bash_sh" width="auto" height="25">
- Tools:
  - Advanced Package Tool (Apt)   <img src="https://github.com/PedroHeeger/main/blob/main/0-aux/logos/software/apt.png" alt="apt" width="auto" height="25">
  - Advanced Package Tool (Apt-Get)   <img src="https://github.com/PedroHeeger/main/blob/main/0-aux/logos/software/apt-get.jpg" alt="apt-get" width="auto" height="25">
  - Curl   <img src="https://github.com/PedroHeeger/main/blob/main/0-aux/logos/software/curl.png" alt="curl" width="auto" height="25">
- Network:
  - netstat   <img src="https://github.com/PedroHeeger/main/blob/main/0-aux/logos/software/netstat.webp" alt="netstat" width="auto" height="25">
  - Nmap   <img src="https://github.com/PedroHeeger/main/blob/main/0-aux/logos/software/nmap.png" alt="nmap" width="auto" height="25">
  - OpenSSH   <img src="https://github.com/PedroHeeger/main/blob/main/0-aux/logos/software/openssh.png" alt="openssh" width="auto" height="25">
  - OWASP Juice Shop   <img src="https://github.com/PedroHeeger/main/blob/main/0-aux/logos/sites/owasp_juice_shop.png" alt="owasp_juice_shop" width="auto" height="25">
  - OWASP ModSecurity Core Rule Set (OWASP ModSecurity CRS)   <img src="https://github.com/PedroHeeger/main/blob/main/0-aux/logos/software/owasp_modesecurity_crs.png" alt="owasp_modesecurity_crs" width="auto" height="25">
  - Uncomplicated Firewall (UFW)   <img src="https://github.com/PedroHeeger/main/blob/main/0-aux/logos/software/ufw.webp" alt="ufw" width="auto" height="25">
- Remote Desktop:
  - RealVNC Viewer   <img src="https://github.com/PedroHeeger/main/blob/main/0-aux/logos/software/realvnc.png" alt="realvnc_viewer" width="auto" height="25">
- Cibersecurity:
  - Amass   <img src="https://github.com/PedroHeeger/main/blob/main/0-aux/logos/software/amass.png" alt="amass" width="auto" height="25">
  - dnsx   <img src="https://github.com/PedroHeeger/main/blob/main/0-aux/logos/software/dnsx.png" alt="dnsx" width="auto" height="25">
  - Gitleaks   <img src="https://github.com/PedroHeeger/main/blob/main/0-aux/logos/software/gitleaks.png" alt="gitleaks" width="auto" height="25">
  - Hakrawler   <img src="" alt="hakrawler" width="auto" height="25">
  - httpx   <img src="https://github.com/PedroHeeger/main/blob/main/0-aux/logos/software/httpx.png" alt="httpx" width="auto" height="25">
  - Kali Linux   <img src="https://github.com/PedroHeeger/main/blob/main/0-aux/logos/software/kali_linux.png" alt="kali_linux" width="auto" height="25">
  - Nuclei   <img src="https://github.com/PedroHeeger/main/blob/main/0-aux/logos/software/nuclei.png" alt="nuclei" width="auto" height="25">
  - Sqlmap   <img src="https://github.com/PedroHeeger/main/blob/main/0-aux/logos/software/sqlmap.png" alt="sqlmap" width="auto" height="25">
  - Subfinder   <img src="https://github.com/PedroHeeger/main/blob/main/0-aux/logos/software/subfinder.svg" alt="subfinder" width="auto" height="25">
  - Trivy   <img src="https://github.com/PedroHeeger/main/blob/main/0-aux/logos/software/trivy.png" alt="trivy" width="auto" height="25">
- SysAdm:
  - Xfce   <img src="https://github.com/PedroHeeger/main/blob/main/0-aux/logos/software/xfce.svg" alt="xfce" width="auto" height="25">

---

### Bootcamp Module 3 Structure:
3. <a name="item3">M√≥dulo 3: Ethical Hacking (Red Team)<br>
  3.1 <a href="#item3.1">Pentest: Metodologia & Regras de Engajamento</a><br>
  3.2 <a href="#item3.2">Lab 2: Descobrindo os Segredos dos Servidores Web</a><br>
  3.3 <a href="#item3.3">Firewall & ACL</a><br>
  3.4 <a href="#item3.4">IDS e IPS</a><br>
  3.5 <a href="#item3.5">Monitoramento de Logs</a><br>
  3.6 <a href="#item3.6">Patch Management</a><br>
  3.7 <a href="#item3.7">Cloud Security</a><br>
  3.8 <a href="#item3.8">IAM e Permissionamento</a><br>
  3.9 <a href="#item3.9">Container Security Docker Bench & Trivy</a><br>
  3.10 <a href="#item3.10">NIST & Resposta a Incidentes</a><br>

---

### Objective:
Desenvolver a mentalidade ofensiva necess√°ria para simular ataques reais e transformar descobertas em evid√™ncias t√©cnicas e recomenda√ß√µes acion√°veis, por meio da aplica√ß√£o de metodologias de pentest, explora√ß√£o de vulnerabilidades com ferramentas como **Metasploit** e **Burp Suite**, t√©cnicas de quebra de credenciais, escalonamento de privil√©gios em **Linux** e **Windows**, movimenta√ß√£o lateral, evas√£o de controles de defesa e elabora√ß√£o de relat√≥rios t√©cnicos profissionais.

### Folder Structure:
- [README.md](./README.md): Documento escrito em **Markdown** descrevendo todo conte√∫do te√≥rico realizado neste m√≥dulo.
- [labs.md](./labs.md): Este documento de README, escrito em **Markdown**, descrevendo todos os laborat√≥rios realizados neste m√≥dulo.

### Development:
Em ciberseguran√ßa, √© pr√°tica comum e recomendada realizar laborat√≥rios em ambientes controlados e seguros. Por isso, ferramentas como **Docker** ou m√°quinas virtuais s√£o utilizadas para simular ambientes reais, protegendo a infraestrutura local, uma vez que o uso de ferramentas de ataque ou altera√ß√µes em configura√ß√µes de rede podem comprometer a integridade do sistema. O ambiente de laborat√≥rio √© estruturado em duas partes: a primeira envolve a instala√ß√£o dos softwares que virtualiza√ß√£o um ambiente, como **WSL2**, **Docker** ou **VM VirtualBox**, al√©m de ferramentas de suporte essenciais, como editores de c√≥digo (**Visual Studio Code (VS Code)**) e sistemas de versionamento (**Git**).  

Neste curso, a virtualiza√ß√£o do ambiente foi realizada principalmente com **Docker** em conjunto com **WSL**. No entanto, para a maioria dos labs utilizei o **Docker** em inst√¢ncias do **Amazon Elastic Compute Cloud (EC2)**, na nuvem da **Amazon Web Services (AWS)**, como alternativa de execu√ß√£o. Em pequenos casos, para realizar testes, a plataforma **Play With Docker (PWD)** tamb√©m foi utilizada.

A cria√ß√£o da inst√¢ncia EC2 foi automatizada por meio do script [`ec2Instance.ps1`](../environment/ec2Instance.ps1), desenvolvido em **Windows PowerShell** utilizando comandos da **AWS Command Line Interface (CLI)**. O script est√° localizado na pasta [`environment`](../environment/) deste curso, pois foi o mesmo para todos os m√≥dulos. A inst√¢ncia foi provisionada com a imagem `ami-020cba7c55df1f615`, baseada no sistema operacional **Linux Ubuntu**, associada a um volume do **Amazon Elastic Block Store (EBS)** de `8 GB`, do tipo `gp` (General Purpose). O tipo de inst√¢ncia utilizado foi o `t3.medium`, com 2 vCPUs e 4 GB de mem√≥ria. Para acesso, foi utilizado o par de chaves `keyPairUniversal`, previamente existente na conta da **AWS**, e o grupo de seguran√ßa atribu√≠do √† inst√¢ncia foi o `default` da zona de disponibilidade `us-east-1a` (Norte da Virg√≠nia). Um script de *user data* foi utilizado para automatizar a instala√ß√£o do **Git** e do **Docker** durante o processo de inicializa√ß√£o.

O acesso √† inst√¢ncia podia ser feito tanto pelo console da **AWS** quanto por meio de conex√£o SSH utilizando o **OpenSSH** no **Windows PowerShell** da m√°quina local. Neste √∫ltimo caso, era necess√°rio informar o caminho do arquivo de chave privada, o nome do usu√°rio do sistema e o IP ou DNS p√∫blico da inst√¢ncia. Um exemplo de comando seria: `ssh -i "G:/Meu Drive/4_PROJ/scripts/aws/.default/secrets/awsKeyPair/universal/keyPairUniversal.pem" ubuntu@54.160.249.118`. Al√©m disso, o Security Group associado √† inst√¢ncia precisava conter uma regra de entrada liberando a porta `22` para o IP p√∫blico da m√°quina f√≠sica, a fim de permitir o estabelecimento da conex√£o SSH. As m√°quinas virtuais do **Play With Docker (PWD)** tamb√©m foram acessadas via SSH. Nesse caso, o pr√≥prio ambiente fornecia o comando necess√°rio para a conex√£o, que podia ser executado diretamente no **Windows PowerShell**, sem necessidade de autentica√ß√£o com chave privada ou senha.

A segunda parte do ambiente de laborat√≥rio consiste na constru√ß√£o do ambiente simulado propriamente dito. No caso do **Docker**, isso envolve a cria√ß√£o de containers, redes e volumes, realizada por meio de dois tipos principais de arquivos. O primeiro √© o `docker-compose.yml`, que define de forma serial toda a estrutura a ser criada: quais e quantos containers, suas configura√ß√µes, as imagens que ir√£o utilizar e os volumes e redes que ser√£o estabelecidos. O segundo tipo de arquivo, que pode existir mais de um por laborat√≥rio, s√£o os `Dockerfile`, respons√°veis por criar imagens espec√≠ficas para cada container. Essas imagens podem ser enviadas a reposit√≥rios de imagens **Docker**, como o **DockerHub**, ou referenciadas diretamente no arquivo do **Docker Compose**.

Todos esses arquivos eram preparados pelo instrutor do curso e disponibilizados no [reposit√≥rio](https://github.com/Kensei-CyberSec-Lab/formacao-cybersec/) do curso no perfil da plataforma **Vai na Web** no **GitHub**. O reposit√≥rio era organizado pelos tr√™s m√≥dulos do curso, com pastas correspondentes a cada laborat√≥rio. Geralmente, o n√∫mero do laborat√≥rio coincidia com o n√∫mero da aula, embora nem todos os labs seguissem essa sequ√™ncia e nem todas as aulas tivessem laborat√≥rios. Em cada pasta de laborat√≥rio, al√©m dos arquivos `docker-compose.yml` e `Dockerfile`, podiam existir arquivos complementares, como scripts, textos ou documentos **Markdown**, contendo informa√ß√µes relevantes ou conte√∫dos necess√°rios para a execu√ß√£o do lab. Durante a realiza√ß√£o de cada lab, al√©m de executar os exerc√≠cios, foi feita uma explica√ß√£o detalhada sobre a constru√ß√£o dos arquivos de **Docker Compose**,  **Docker** e as depend√™ncias utilizadas, evidenciando como o ambiente foi estruturado.

Para executar os arquivos e iniciar o ambiente de laborat√≥rio, a sequ√™ncia de comandos utilizada era a seguinte:
- `git clone https://github.com/Kensei-CyberSec-Lab/formacao-cybersec.git`: Clonagem do reposit√≥rio do bootcamp para o ambiente local, seja no **WSL**, em m√°quinas virtuais ou, como no meu caso, em inst√¢ncias **Amazon EC2**.
- `cd formacao-cybersec/modulo3-ethical-hacking/lab_1`: Navega√ß√£o at√© o diret√≥rio do laborat√≥rio a ser executado. Para outros labs, bastava alterar as duas √∫ltimas pastas do caminho para o m√≥dulo e lab correspondentes.
- `docker compose up -d`: Inicializa√ß√£o do ambiente com **Docker Compose**. Este comando devia ser executado na pasta onde o arquivo `docker-compose.yml` estava localizado.
- `docker ps` e `docker network ls`: Verifica√ß√£o dos containers ativos e das redes existentes no ambiente.
- `docker exec -it kali /bin/bash`: Acesso a um container em execu√ß√£o. Bastava substituir `kali` pelo nome do container que desejava-se acessar.
- `docker compose down`: Encerramento do ambiente. Assim como na inicializa√ß√£o, este comando devia ser executado na pasta onde se encontrava o arquivo `docker-compose.yml`.
- `docker system prune -f`: Remo√ß√£o containers parados, redes n√£o usadas, imagens dangling (imagens sem tags) e caches de build.
- `docker system prune -a`: Remo√ß√£o containers parados, redes n√£o usadas, imagens dangling (imagens sem tags) e caches de build, al√©m de remo√ß√£o de todas as imagens n√£o usadas por containers.

Os laborat√≥rios de ciberseguran√ßa s√£o organizados com m√°quinas de ataque, geralmente uma **Kali Linux**, e m√°quinas alvo ou de defesa, que s√£o os sistemas onde os ataques s√£o realizados. Pode haver m√∫ltiplas m√°quinas de cada tipo, sendo comum que algumas m√°quinas de defesa sejam propositalmente vulner√°veis, incluindo aplica√ß√µes web criadas para testes. Como o ambiente √© simulado via **Docker**, termos como servidor, m√°quina, container ou host frequentemente se referem aos containers que representam as m√°quinas simuladas. Al√©m disso, √© importante ter em mente que existiam outras duas camadas no ambiente: a m√°quina f√≠sica, no caso meu computador pessoal **Windows**, e a m√°quina virtual fornecida pela **AWS** ou pelo **Play With Docker (PWD)**, que hospedava e executava os containers do **Docker**.

Outra parte importante dos laborat√≥rios foram os *Capture The Flag (CTF)*, desafios t√©cnicos amplamente utilizados na √°rea de ciberseguran√ßa para desenvolver e validar conhecimento pr√°tico. Cada desafio apresenta um cen√°rio espec√≠fico ‚Äî como explora√ß√£o de vulnerabilidades, an√°lise de tr√°fego, OSINT ou engenharia reversa ‚Äî e exige que o participante realize uma a√ß√£o ou resolva um problema para obter a flag. A flag n√£o se limita a uma string ou c√≥digo a ser encontrado, ela representa a prova de que o objetivo do desafio foi cumprido com sucesso. Ao longo dos laborat√≥rios do curso, diversos CTFs foram incorporados ao ambiente simulado, servindo como etapas pr√°ticas de valida√ß√£o do conte√∫do e permitindo aplicar, de forma objetiva, os conceitos aprendidos. Dessa forma, os laborat√≥rios n√£o apenas simularam cen√°rios reais de ataque e defesa, como tamb√©m proporcionaram desafios progressivos que refor√ßaram o racioc√≠nio l√≥gico, a an√°lise t√©cnica e a consolida√ß√£o do conhecimento.

<a name="item3.1"><h4>3.1 Pentest: Metodologia & Regras de Engajamento</h4></a>[Back to summary](#item3)   
[Material do Lab](https://github.com/Kensei-CyberSec-Lab/formacao-cybersec/tree/main/modulo3-ethical-hacking/lab_1)

Obs.: Laborat√≥rio registrado como 1, documento como 1 e referente a aula 1.

<details><summary><strong>Ambiente de Laborat√≥rio</strong></summary>
  <ul>
    <li><details><summary><strong>Docker Compose</strong></summary>
        <ul>
          <li><details><summary><strong>services:</strong></summary>
            <ul>
              <li><details><summary><strong>kali:</strong></summary>
                <ul>
                  <li><strong>build:</strong>
                    <ul>
                      <li><code>context: .</code>: Contexto da build √© o diret√≥rio atual.</li>
                      <li><code>dockerfile: kali.Dockerfile</code>: Usa o arquivo <code>kali.Dockerfile</code> para construir a imagem.</li>
                    </ul>
                  </li>
                  <li><strong>container_name:</strong> Define o nome do container como <code>kensei_kali</code>.</li>
                  <li><code>tty: true</code>: Permite alocar um terminal interativo para o container.</li>
                  <li><code>stdin_open: true</code>: Mant√©m o STDIN aberto para uso com <code>docker exec -it</code>.</li>
                  <li><strong>volumes:</strong>
                    <ul>
                      <li><code>- ./labs:/home/kali/labs</code>: Monta o diret√≥rio local <code>./labs</code> dentro do container em <code>/home/kali/labs</code>, facilitando desenvolvimento e uso de scripts.</li>
                    </ul>
                  </li>
                  <li><strong>command:</strong> <code>/bin/bash</code>: Inicia o shell Bash, mantendo o container pronto para uso.</li>
                </ul>
              </details></li>
              <li><details><summary><strong>spiderfoot:</strong></summary>
                <ul>
                  <li><strong>build:</strong>
                    <ul>
                      <li><code>context: .</code>: Define o diret√≥rio atual como contexto da build.</li>
                      <li><code>dockerfile: Dockerfile.spiderfoot</code>: Usa o Dockerfile dedicado do SpiderFoot para construir a imagem.</li>
                    </ul>
                  </li>
                  <li><strong>container_name:</strong> Define o nome do container como <code>kensei_spiderfoot</code>.</li>
                  <li><strong>ports:</strong>
                    <ul>
                      <li><code>"5001:5001"</code>: Exp√µe a interface web do SpiderFoot na porta 5001 do host.</li>
                    </ul>
                  </li>
                  <li><strong>volumes:</strong>
                    <ul>
                      <li><code>- ./spiderfoot-data:/root/.spiderfoot</code>: Monta o diret√≥rio local <code>./spiderfoot-data</code> dentro do container em <code>/root/.spiderfoot</code>, garantindo que configura√ß√µes, resultados e dados do SpiderFoot sejam persistidos entre reinicializa√ß√µes do container.</li>
                    </ul>
                  </li>
                </ul>
              </details></li>
              <li><details><summary><strong>neo4j:</strong></summary>
                <ul>
                  <li><strong>image:</strong> Usa a imagem oficial <code>neo4j:4.4</code>.</li>
                  <li><strong>container_name:</strong> Define o nome do container como <code>kensei_neo4j</code>.</li>
                  <li><strong>environment:</strong>
                    <ul>
                      <li><code>NEO4J_AUTH=neo4j/test</code>: Define usu√°rio e senha iniciais (<code>neo4j</code> / <code>test</code>).</li>
                      <li><code>NEO4J_dbms_memory_heap_initial__size=512m</code>: Define o tamanho inicial do heap de mem√≥ria do Neo4j como 512 MB.</li>
                      <li><code>NEO4J_dbms_memory_heap_max__size=1g</code>: Define o tamanho m√°ximo do heap de mem√≥ria do Neo4j como 1 GB.</li>
                    </ul>
                  </li>
                  <li><strong>ports:</strong>
                    <ul>
                      <li><code>"7474:7474"</code>: Mapeia a porta 7474 do container para a porta 7474 do host, permitindo acesso √† interface web do Neo4j via navegador.</li>
                      <li><code>"7687:7687"</code>: Mapeia a porta 7687 do container para a porta 7687 do host, utilizada pelo Bolt protocol para conex√£o de drivers e aplica√ß√µes ao Neo4j.</li>
                    </ul>
                  </li>
                  <li><strong>volumes:</strong>
                    <ul>
                      <li><code>- ./neo4j-data:/data</code>: Monta o diret√≥rio local <code>./neo4j-data</code> dentro do container em <code>/data</code>, garantindo que o banco de dados Neo4j seja persistido no host entre reinicializa√ß√µes do container.</li>
                    </ul>
                  </li>
                </ul>
              </details></li>
            </ul>
          </details></li>
          <li><details><summary><strong>networks:</strong></summary>
            <ul>
              <li><code>default:</code>
                <ul>
                  <li><strong>name:</strong> <code>kensei_lab_net</code>: Nomeia a rede padr√£o usada pelos servi√ßos, garantindo comunica√ß√£o entre containers dentro dessa rede.</li>
                </ul>
              </li>
            </ul>
          </details></li>
        </ul>
      </details></li>
    <li><details><summary><strong>Dockerfile</strong></summary>
      <ul>
        <li><details><summary><strong>Dockerfile.kali</strong></summary>
          <ul>
            <li><code>FROM kalilinux/kali-rolling</code>: Imagem base Kali Rolling.</li>
            <li><strong>RUN:</strong> Executa a instala√ß√£o de ferramentas essenciais e limpa o cache para reduzir o tamanho da imagem:
              <ul>
                <li><code>apt-get update</code>: Atualiza a lista de pacotes dispon√≠veis.</li>
                <li><code>apt-get install -y git curl jq python3-pip build-essential golang-go amass</code>: Instala ferramentas essenciais de desenvolvimento, rede e pentest.</li>
                <li><code>apt-get clean && rm -rf /var/lib/apt/lists/*</code>: Remove arquivos tempor√°rios e limpa cache do apt.</li>
              </ul>
            </li>
            <li><code>ENV GOPATH=/root/go</code>: Define a vari√°vel <code>GOPATH</code> apontando para <code>/root/go</code>, diret√≥rio onde o Go instalar√° pacotes e bin√°rios do usu√°rio.</li>
            <li><code>ENV PATH=$PATH:/root/go/bin</code>: Adiciona <code>/root/go/bin</code> ao <code>PATH</code>, permitindo executar ferramentas instaladas via <code>go install</code>.</li>
            <li><code>RUN mkdir -p $GOPATH</code>: Cria diret√≥rio do GOPATH.</li>
            <li><strong>RUN:</strong> Instala ferramentas Go no <code>GOPATH</code> utilizando <code>go install ...@latest</code> e disponibiliza os bin√°rios em <code>/root/go/bin</code>:
              <ul>
                <li><code>go install github.com/projectdiscovery/subfinder/v2/cmd/subfinder@latest</code>: Instala o <strong>subfinder</strong>, usado para descoberta de subdom√≠nios.</li>
                <li><code>go install github.com/projectdiscovery/httpx/cmd/httpx@latest</code>: Instala o <strong>httpx</strong>, utilizado para verifica√ß√£o e coleta de informa√ß√µes HTTP (status, headers, t√≠tulos, etc.).</li>
                <li><code>go install github.com/projectdiscovery/nuclei/v2/cmd/nuclei@latest</code>: Instala o <strong>nuclei</strong>, motor de scan de vulnerabilidades baseado em templates.</li>
                <li><code>go install github.com/hakluke/hakrawler@latest</code>: Instala o <strong>hakrawler</strong>, um crawler r√°pido para descoberta de endpoints e conte√∫do web.</li>
                <li><code>go install github.com/zricethezav/gitleaks/v8@latest</code>: Instala o <strong>gitleaks</strong>, ferramenta para detec√ß√£o de segredos e chaves em reposit√≥rios.</li>
              </ul>
            </li>
            <li><code>COPY scripts /home/kali/scripts</code>: Copia scripts locais para dentro do container.</li>
            <li><code>WORKDIR /home/kali</code>: Define diret√≥rio de trabalho.</li>
            <li><code>CMD ["/bin/bash"]</code>: Inicia o shell Bash.</li>
          </ul>
        </details></li>
        <li><details><summary><strong>Dockerfile.spiderfoot</strong></summary>
          <ul>
            <li><code>FROM python:3.10-slim</code>: Usa a imagem base Python 3.10 slim como ambiente inicial.</li>
            <li><strong>RUN</strong>:
              <ul>
                <li><code>apt-get update</code>: Atualiza a lista de pacotes.</li>
                <li><code>apt-get install -y --no-install-recommends git build-essential python3-dev libyaml-dev curl ca-certificates gcc g++ make libffi-dev libssl-dev</code>: Instala depend√™ncias do sistema necess√°rias para compilar e executar as depend√™ncias Python do SpiderFoot.</li>
                <li><code>rm -rf /var/lib/apt/lists/*</code>: Remove listas de pacotes para reduzir o tamanho final da imagem.</li>
              </ul>
            </li>
            <li><code>RUN pip3 install -U pip setuptools wheel cython</code>: Atualiza o gerenciador de pacotes Python e instala ferramentas de build (necess√°rias para compilar extens√µes como PyYAML).</li>
            <li><code>WORKDIR /app</code>: Define o diret√≥rio de trabalho para os comandos seguintes.</li>
            <li><code>RUN git clone --depth=1 --branch v4.0 https://github.com/smicallef/spiderfoot /app</code>: Clona a vers√£o 4.0 do reposit√≥rio SpiderFoot diretamente para <code>/app</code>.</li>
            <li><code>RUN sed -i 's/pyyaml>=5.4.1,<6/pyyaml>=6.0/' requirements.txt</code>: Altera a especifica√ß√£o do PyYAML no <code>requirements.txt</code> para uma vers√£o compat√≠vel (quando necess√°rio) antes da instala√ß√£o das depend√™ncias.</li>
            <li><code>RUN pip3 install -r requirements.txt</code>: Instala as depend√™ncias Python do SpiderFoot listadas em <code>requirements.txt</code>.</li>
            <li><code>EXPOSE 5001</code>: Exp√µe a porta 5001, usada pela interface web do SpiderFoot.</li>
            <li><code>CMD ["python3", "sf.py", "-l", "0.0.0.0:5001"]</code>: Comando padr√£o para iniciar o SpiderFoot, fazendo-o escutar em todas as interfaces na porta 5001.</li>
          </ul>
        </details></li>
      </ul>
    </details></li>
  </ul>
</details>

Os laborat√≥rios do m√≥dulo tr√™s, na maioria das vezes, seguiram uma sequ√™ncia interligada: um processo realizado em um laborat√≥rio anterior servia como base para o pr√≥ximo. Neste m√≥dulo, o foco foi o ataque ‚Äî o objetivo era explorar sistemas em n√≠veis que iam do introdut√≥rio ao avan√ßado, permitindo compreender os processos gradualmente. Era terminantemente proibido comprometer sistemas reais; foram utilizados apenas sistemas criados pelo instrutor para fins de aprendizado, com acesso e a√ß√µes estritamente controlados pelos instrutores. Esses sistemas foram gerenciados na **AWS** e envolveram variados servi√ßos. Na maioria dos labs foi utilizado um √∫nico sistema, cujo n√≠vel de dificuldade aumentava progressivamente; em outros, existiram sistemas distintos destinados a finalidades espec√≠ficas.

O primeiro laborat√≥rio consistiu em executar OSINT ‚Äî com footprinting passivo e ativo ‚Äî em um dos sistemas fornecidos pelo instrutor. O alvo era um sistema de uma empresa fict√≠cia de log√≠stica, denominado Acme Corp. O objetivo foi realizar o reconhecimento, descobrir e documentar informa√ß√µes sobre a infraestrutura e realizar uma explora√ß√£o leve e controlada (footprinting ativo) sem causar impacto ao ambiente. Todo o processo teve car√°ter investigativo: analisar o sistema e registrar as observa√ß√µes para embasar e orientar as etapas subsequentes em outros laborat√≥rios.

O ambiente **Docker** foi implantado em uma inst√¢ncia **Amazon EC2** na **AWS** e era composto pelos tr√™s containers seguintes:
- `kensei_kali`: **Kali Linux** utilizado para ataque e reconhecimento. Continha ferramentas como **Subfinder**, **Httpx**, **Nuclei**, **Hakrawler**, **Gitleaks**, al√©m de softwares como: **Python**, **curl**, **git**, **jq**, **build-essential**, **Golang** e **Amass**.
- `kensei_spiderfoot`: container executando o **SpiderFoot**.
- `kensei_neo4j`: container executando o **Neo4j**.

Antes do in√≠cio da primeira etapa, o reconhecimento, foi feito o acesso ao container **Kali Linux** a partir da inst√¢ncia remota utilizando o comando `docker exec -it kensei_kali /bin/bash`. Dentro do container, foi criada a pasta de trabalho `acme-corp` com `mkdir -p /home/kali/investigations/acme-corp` e, em seguida, acessado o diret√≥rio com `cd /home/kali/investigations/acme-corp`. A maior parte dos comandos executados teve seus outputs salvos em arquivos dentro dessa pasta. Uma pasta id√™ntica, com a c√≥pia desses arquivos, foi criada na pasta desse m√≥dulo, chamada [acme-corp](./acme-corp/).

üîç Fase 1 ‚Äî Reconhecimento   
Na Fase 1, o objetivo foi enumerar todos os subdom√≠nios associados ao dom√≠nio da empresa Acme Corp (`acme-corp-lab.com`). A partir do container de ataque Kali, foi executado o **Subfinder** com o comando `subfinder -d acme-corp-lab.com -o subdomains.txt`, que coletou os subdom√≠nios e salvou o resultado no arquivo [subdomains.txt](./acme-corp/subdomains.txt), dentro do diret√≥rio criado em `/home/kali/investigations/acme-corp`. Em seguida, verificou-se o conte√∫do gerado com `cat /home/kali/investigations/acme-corp/subdomains.txt` para confirmar os subdom√≠nios encontrados, conforme ilustrado na imagem 01.

<div align="center"><figure>
    <img src="../0-aux/md3-img01.png" alt="img01"><br>
    <figcaption>Imagem 01.</figcaption>
</figure></div><br>

Um dos subdom√≠nios identificados apresentava o prefixo `old`, indicando tratar-se de um sistema legado ‚Äî normalmente mais suscet√≠vel a vulnerabilidades. Entretanto, o reconhecimento continuou com a execu√ß√£o do **Amass** com tempo limitado usando `timeout 300 amass enum -passive -d acme-corp-lab.com -o amass_results.txt -v || echo "Amass timeout - continuando com Subfinder"`, de modo que quaisquer resultados fossem gravados em [amass_results.txt](./acme-corp/amass_results.txt). Por fim, verificou-se o conte√∫do retornado pelo **Amass** com `cat /home/kali/investigations/acme-corp/amass_results.txt`.

```bash
if [ -f amass_results.txt ]; then
    echo "=== RESULTADOS DO AMASS ==="
    cat amass_results.txt
else
    echo "Amass n√£o completou - usando apenas resultados do Subfinder"
fi
```

O **Amass** demorou muito e n√£o trouxe novas descobertas; por isso, foram utilizados apenas os resultados do **Subfinder**. O **Amass** √© uma ferramenta valiosa, pois agrega informa√ß√µes de v√°rias fontes. Por√©m, como o dom√≠nio era recente e criado exclusivamente para o laborat√≥rio, n√£o havia muita informa√ß√£o p√∫blica dispon√≠vel sobre ele.

Ainda dentro do reconhecimento, o pr√≥ximo passo foi utilizar o **dnsx** para verificar nos servidores DNS se cada um dos quatro subdom√≠nios descobertos possu√≠a algum registro v√°lido. Registros DNS podem ser do tipo A (IPv4), AAAA (IPv6) ou outros, como CNAME. Encontrar um registro DNS indicava que o dom√≠nio estava ativo; caso contr√°rio, o dom√≠nio n√£o estava configurado ou registrado em um servidor DNS. Dessa forma, executou-se `cat subdomains.txt | dnsx -resp -silent -o resolved_subdomains.txt`, que consultou cada subdom√≠nio e salvou as entradas resolvidas no arquivo [resolved_subdomains.txt](./acme-corp/resolved_subdomains.txt). Os resultados, conforme imagem 02, mostraram que todos os subdom√≠nios possu√≠am m√∫ltiplos registros do tipo A, indicando que cada subdom√≠nio resolvia para v√°rios endere√ßos IP distintos. Esse cen√°rio sugeria a exist√™ncia de uma infraestrutura distribu√≠da ou a utiliza√ß√£o de balanceamento de carga.

<div align="center"><figure>
    <img src="../0-aux/md3-img02.png" alt="img02"><br>
    <figcaption>Imagem 02.</figcaption>
</figure></div><br>

Na sequ√™ncia, foi utilizado o **httpx** para realizar requisi√ß√µes HTTP/HTTPS em cada um dos subdom√≠nios descobertos, identificando informa√ß√µes como t√≠tulo da p√°gina, tecnologias utilizadas e c√≥digo de status. O comando executado foi `cat subdomains.txt | httpx -title -tech-detect -status-code -o live_web_services.txt`, e os resultados foram salvos no arquivo [live_web_services.txt](./live_web_services.txt) dentro do diret√≥rio `/home/kali/investigations/acme-corp/`. A imagem 03 apresenta os resultados, permitindo identificar o seguinte:
- `www.acme-corp-lab.com`: site est√°tico hospedado no **Amazon S3**, t√≠pico do site principal.
- `admin.acme-corp-lab.com`: painel **WordPress**, alvo comum em testes de seguran√ßa de interfaces administrativas.
- `old.acme-corp-lab.com`: retornou HTTP 301, indicando um redirecionamento.

#TROCAR AQUI

<div align="center"><figure>
    <img src="../0-aux/md3-img03.png" alt="img03"><br>
    <figcaption>Imagem 03.</figcaption>
</figure></div><br>

üéØ Fase 2 ‚Äî Descoberta   
A fase de descoberta foi realizada acessando cada dom√≠nio no navegador da m√°quina f√≠sica **Windows** ou via **Curl** no container de ataque **Kali Linux**. Ao acessar `www.acme-corp-lab.com` em ambos os ambientes, a resposta HTTP foi 200 e o conte√∫do exibido correspondia ao dom√≠nio raiz `acme-corp-lab.com`. Isso indicava que a distribui√ß√£o do **Amazon CloudFront** estava configurada para servir tanto o subdom√≠nio `www.acme-corp-lab.com` quanto o dom√≠nio raiz `acme-corp-lab.com` a partir da mesma infraestrutura ‚Äî com o **CloudFront** posicionado na frente do **Amazon S3** que hospedava o site est√°tico ‚Äî em vez de retornar um redirecionamento HTTP expl√≠cito. A imagem 04 mostra o acesso a `www.acme-corp-lab.com` no navegador.

<div align="center"><figure>
    <img src="../0-aux/md3-img04.png" alt="img04"><br>
    <figcaption>Imagem 04.</figcaption>
</figure></div><br>

O dom√≠nio era p√∫blico, pois o laborat√≥rio exigia um dom√≠nio acess√≠vel para que o processo de OSINT pudesse ser realizado por ferramentas de coleta de informa√ß√µes p√∫blicas. Os demais subdom√≠nios n√£o estavam expostos publicamente, j√° que seriam alvos de explora√ß√£o controlada e, portanto, exigiam regras de acesso restritas. Um dos instrutores foi respons√°vel por autorizar o acesso dos alunos ‚Äî provavelmente adicionando o endere√ßo IP p√∫blico de cada aluno a um grupo de seguran√ßa com permiss√£o para acessar esses subdom√≠nios.

Ap√≥s a autoriza√ß√£o do IP p√∫blico da minha inst√¢ncia `Amazon EC2` (host do ambiente `Docker`), acessou-se o subdom√≠nio `admin.acme-corp-lab.com` sem obter resultados relevantes. Em seguida, acessou-se `old.acme-corp-lab.com`, que redirecionou para o IP `3.94.82.59` e exibiu uma p√°gina intitulada `Legacy System` com tr√™s links de interesse (conforme imagem 05). Antes de abrir os links no navegador, repetiu-se o mesmo procedimento via **Curl** no container de ataque: `curl -L -s http://old.acme-corp-lab.com/ > old_acme_page.html`, que seguiu a cadeia de redirecionamentos at√© a p√°gina final e salvou o conte√∫do em [old_acme_page.html](./acme-corp/old_acme_page.html). Como o IP final do redirecionamento j√° era conhecido, tamb√©m foi poss√≠vel obter a mesma p√°gina diretamente com `curl -s http://3.94.82.59/ > legacy_page.html`, salvando o mesmo conte√∫do HTML no arquivo [legacy_page.html](./acme-corp/legacy_page.html).

<div align="center"><figure>
    <img src="../0-aux/md3-img05.png" alt="img05"><br>
    <figcaption>Imagem 05.</figcaption>
</figure></div><br>

Com os resultados obtidos, foi poss√≠vel inferir que a p√°gina funcionava como um hub central, encaminhando para outros servi√ßos por meio dos tr√™s links identificados. Embora os coment√°rios HTML no final da p√°gina n√£o fossem vis√≠veis diretamente no navegador, eles apareceram ao salvar o conte√∫do com **Curl**. Para extrair esses coment√°rios utilizou-se `awk '/^<!--/,/-->$/' legacy_page.html`, que isolou os blocos de coment√°rios HTML no arquivo, e esses coment√°rios revelaram duas URLs p√∫blicas do **Amazon S3**, conforme evidenciado na imagem 06.

<div align="center"><figure>
    <img src="../0-aux/md3-img06.png" alt="img06"><br>
    <figcaption>Imagem 06.</figcaption>
</figure></div><br>

Com os dois comandos a seguir foram baixados os arquivos do S3: `curl -s https://acme-corp-lab-public-files-6nssymq7.s3.us-east-1.amazonaws.com/company_info.txt` e `curl -s https://acme-corp-lab-public-files-6nssymq7.s3.us-east-1.amazonaws.com/employees.csv`. Ambos foram salvos no diret√≥rio de trabalho `/home/kali/investigations/acme-corp/`. O arquivo [company_info.txt](./acme-corp/company_info.txt) continha informa√ß√µes sobre a infraestrutura da empresa, endere√ßos de escrit√≥rios e servidores de e-mail e DNS. J√° o arquivo [employees.csv](./acme-corp/employees.csv) trazia uma lista completa de funcion√°rios com endere√ßos de e-mail e n√∫meros de telefone. Ou seja, essa empresa estava vazando informa√ß√µes sens√≠veis.

üîç Fase 3 ‚Äî Explora√ß√£o   
Na fase de explora√ß√£o, testaram-se os dois subdom√≠nios que n√£o haviam retornado resultados (`admin.acme-corp-lab.com` e `dev.acme-corp-lab.com`) utilizando tamb√©m o endpoint gen√©rico da **AWS** para buckets com site est√°tico na regi√£o `us-east-1` (Norte Virg√≠nia): `s3-website-us-east-1.amazonaws.com`. Nesse cen√°rio, o nome do subdom√≠nio √© usado como nome do bucket e o dom√≠nio torna-se o endpoint da **AWS**. Os testes foram realizados via **Curl** com `curl -I http://admin.acme-corp-lab.com.s3-website-us-east-1.amazonaws.com` e `curl -I http://dev.acme-corp-lab.com.s3-website-us-east-1.amazonaws.com` (imagem 07), al√©m de verifica√ß√µes pelo navegador na m√°quina f√≠sica **Windows** (imagens 09 e 10).

<div align="center"><figure>
    <img src="../0-aux/md3-img07.png" alt="img07"><br>
    <figcaption>Imagem 07.</figcaption>
</figure></div><br>

<div align="center"><figure>
    <img src="../0-aux/md3-img08.png" alt="img08"><br>
    <figcaption>Imagem 08.</figcaption>
</figure></div><br>

<div align="center"><figure>
    <img src="../0-aux/md3-img09.png" alt="img09"><br>
    <figcaption>Imagem 09.</figcaption>
</figure></div><br>

Como mostrado nas imagens, essas URLs redirecionavam diretamente para endere√ßos IP ‚Äî algo comum na infraestrutura da **AWS**. As p√°ginas desses IPs eram exibidas normalmente no navegador, mas para acess√°-las via **Curl** foi necess√°rio executar `curl -I http://54.152.245.201:80/` e `curl -s http://34.207.53.34:3000/ | head -5`. Os IPs acessados foram `54.152.245.201:80`, que correspondia a um servi√ßo administrativo, e `34.207.53.34:3000`, relacionado a uma API chamada Dev. Lembra dos tr√™s links na p√°gina do subdom√≠nio `old.acme-corp-lab.com`? Os dois √∫ltimos (`Admin Panel` e `API`) redirecionavam exatamente para esses servi√ßos. O servi√ßo administrativo exibiu informa√ß√µes sobre **WordPress**, enquanto a API apresentou quatro endpoints: `/api/health`, `/api/system-info`, `/api/users` e `/api/config`.

Na seguran√ßa da informa√ß√£o, APIs s√£o sempre alvos valiosos. Por isso, os quatro endpoints identificados foram testados via **Curl** com os comandos: `curl -s http://34.207.53.34:3000/api/health`, `curl -s http://34.207.53.34:3000/api/system-info`, `curl -s http://34.207.53.34:3000/api/users` e `curl -s http://34.207.53.34:3000/api/config`, conforme imagem 10. Os mesmos acessos tamb√©m foram realizados pelo navegador da m√°quina f√≠sica, e as imagens 11 a 14 mostram os resultados de cada endpoint.

<div align="center"><figure>
    <img src="../0-aux/md3-img10.png" alt="img10"><br>
    <figcaption>Imagem 10.</figcaption>
</figure></div><br>

<div align="center"><figure>
    <img src="../0-aux/md3-img11.png" alt="img11"><br>
    <figcaption>Imagem 11.</figcaption>
</figure></div><br>

<div align="center"><figure>
    <img src="../0-aux/md3-img12.png" alt="img12"><br>
    <figcaption>Imagem 12.</figcaption>
</figure></div><br>

<div align="center"><figure>
    <img src="../0-aux/md3-img13.png" alt="img13"><br>
    <figcaption>Imagem 13.</figcaption>
</figure></div><br>

<div align="center"><figure>
    <img src="../0-aux/md3-img14.png" alt="img14"><br>
    <figcaption>Imagem 14.</figcaption>
</figure></div><br>

O endpoint `/api/system-info` revelou dados sens√≠veis de configura√ß√£o, incluindo a porta `3306` (indicando um **MySQL**), nome de usu√°rio, senha e nome do banco, al√©m de chaves de API para **Stripe**, **Sendgrid**, **AWS** e **GitHub**. Em um ambiente de produ√ß√£o, essas informa√ß√µes poderiam ser utilizadas para comprometer a base de dados e outras partes da infraestrutura, permitindo exfiltra√ß√£o de dados, execu√ß√£o de comandos remotos via servi√ßos em nuvem ou uso indevido das integra√ß√µes com terceiros.

üîç Fase 4 ‚Äî Enumera√ß√£o   
Na fase de enumera√ß√£o utilizou-se o IP do servi√ßo administrativo (`54.152.245.201:80`), previamente identificado como um **WordPress**, com o objetivo de mapear diret√≥rios e descobrir caminhos interessantes. Foi criada uma wordlist personalizada com `echo -e 'admin\napi\nbackup\nconfig\ndev\ngit\nlogin\nphpinfo\nphpmyadmin\ntest\nwww\nwp-admin\nwp-content\nwp-includes\nuploads\nfiles\nimages\ncss\njs\nassets' > /home/kali/investigations/acme-corp/custom_wordlist.txt`, que gerou o arquivo [custom_wordlist.txt](./acme-corp/custom_wordlist.txt) contendo nomes de diret√≥rios potenciais a serem verificados. Em seguida, realizou-se a enumera√ß√£o com o **Gobuster** usando `gobuster dir -u http://54.152.245.201:80 -w /home/kali/investigations/acme-corp/custom_wordlist.txt -o /home/kali/investigations/acme-corp/gobuster_results.txt -q`. Os resultados foram gravados em [gobuster_results.txt](./acme-corp/gobuster_results.txt). A imagem 15 exibe os achados obtidos durante essa varredura.

<div align="center"><figure>
    <img src="../0-aux/md3-img15.png" alt="img15"><br>
    <figcaption>Imagem 15.</figcaption>
</figure></div><br>

Tr√™s diret√≥rios foram encontrados: `wp-admin`, `wp-content` e `wp-includes`. Cada um correspondia a um endpoint acess√≠vel tanto via **Curl** quanto pelo navegador. No navegador foram abertos `http://54.152.245.201:80/wp-admin`, `http://54.152.245.201:80/wp-content` e `http://54.152.245.201:80/wp-includes`. O diret√≥rio `wp-content` n√£o revelou conte√∫do relevante, enquanto `wp-includes` e `wp-admin` expuseram diversas informa√ß√µes sobre a estrutura interna do **WordPress**, facilitando a identifica√ß√£o de rotas, arquivos e potenciais pontos de interesse para explora√ß√£o. As imagens 16 e 17 exibem o acesso a essas p√°ginas.

<div align="center"><figure>
    <img src="../0-aux/md3-img16.png" alt="img16"><br>
    <figcaption>Imagem 16.</figcaption>
</figure></div><br>

<div align="center"><figure>
    <img src="../0-aux/md3-img17.png" alt="img17"><br>
    <figcaption>Imagem 17.</figcaption>
</figure></div><br>

üîç Fase 5 ‚Äî An√°lise   
Na fase cinco, uma an√°lise avan√ßada foi realizado com a ferramenta **SpiderFoot** que foi implantada em um dos containers. A interface web foi acessada pelo navegador da m√°quina f√≠sica **Windows** usando o IP ou DNS p√∫blico da inst√¢ncia na porta `5001`. Para permitir esse acesso, foi criada uma regra no security group da inst√¢ncia liberando a porta `5001` apenas para o IP p√∫blico da m√°quina f√≠sica, e o acesso ao container s√≥ foi poss√≠vel porque o **Docker Compose** estava configurado com o mapeamento de portas `5001:5001`. A imagem 18 evidencia o acesso ao **SpiderFoot**.

<div align="center"><figure>
    <img src="../0-aux/md3-img18.png" alt="img18"><br>
    <figcaption>Imagem 18.</figcaption>
</figure></div><br>

O passo seguinte foi criar um scan para o dom√≠nio `acme-corp-lab.com`, selecionando m√≥dulos relevantes para DNS, HTTP e outras fontes de dados. Assim, o **SpiderFoot** coletava dados de fontes que n√£o foi poss√≠vel acessar manualmente. A imagem 19 mostra....

<div align="center"><figure>
    <img src="../0-aux/md3-img19.png" alt="img19"><br>
    <figcaption>Imagem 19.</figcaption>
</figure></div><br>

üìä Fase 6 ‚Äî Documenta√ß√£o   
A fase final deste laborat√≥rio consistiu em registrar todas as descobertas. Foi criado o arquivo em **Markdown** [investigation_report.md](./acme-corp/investigation_report.md), contendo o relat√≥rio detalhado das informa√ß√µes obtidas durante o lab. Al√©m disso, gerou-se o arquivo [target_ips.txt](./acme-corp/target_ips.txt), com o mapeamento dos IPs descobertos, que serviria como refer√™ncia para o pr√≥ximo laborat√≥rio. Ambos os arquivos foram armazenados no diret√≥rio `acme-corp`.

Neste laborat√≥rio, o processo de OSINT foi conduzido principalmente pelo container de ataque **Kali Linux** no ambiente **Docker**, recorrendo ao navegador em alguns casos para melhor visualiza√ß√£o das informa√ß√µes. Todos os comandos executados no Kali tiveram seus outputs salvos em arquivos ‚Äî uma pr√°tica recomendada para documenta√ß√£o. Para organizar esses arquivos, foi criada a pasta `acme-corp` dentro do diret√≥rio `investigations`. Esse diret√≥rio poderia, em outros laborat√≥rios, abrigar pastas de investiga√ß√£o de sistemas de outras empresas. Por enquanto, trabalhou-se apenas com a Acme Corp. O diret√≥rio de investiga√ß√£o foi localizado em `/home/kali` dentro do container.

A mesma estrutura foi replicada na pasta do m√≥dulo, criando o diret√≥rio [acme-corp](./acme-corp/) e copiando para ele todos os arquivos gerados no container. A seguir est√° a estrutura de arquivos com uma breve descri√ß√£o de cada item:
- [acme-corp](./acme-corp/):
  - [amass_results.txt](./acme-corp/amass_results.txt): resultados da enumera√ß√£o do **Amass**.
  - [company_info.txt](./acme-corp/company_info.txt): arquivo obtido do bucket p√∫blico do **Amazon S3**, contendo informa√ß√µes sobre a empresa, infraestrutura e servidores (e‚Äëmail e DNS).
  - [custom_wordlist.txt](./acme-corp/custom_wordlist.txt): wordlist personalizada usada pelo **Gobuster**.
  - [employees.csv](./acme-corp/employees.csv): arquivo baixado do mesmo bucket p√∫blico do **Amazon S3**, contendo uma lista de funcion√°rios com endere√ßos de e‚Äëmail e n√∫meros de telefone.
  - [gobuster_results.txt](./acme-corp/gobuster_results.txt): resultados da enumera√ß√£o de diret√≥rios pelo **Gobuster**.
  - [investigation_report.md](./acme-corp/investigation_report.md): relat√≥rio final em Markdown com as descobertas do lab.
  - [legacy_page.html](./acme-corp/legacy_page.html): c√≥pia da p√°gina final obtida a partir do redirecionamento do subdom√≠nio `old`.
  - [live_web_services.txt](./acme-corp/live_web_services.txt): sa√≠da do **httpx** com servi√ßos web ativos (t√≠tulos, tecnologias e status).
  - [old_acme_page.html](./acme-corp/old_acme_page.html): c√≥pia da p√°gina original de `old.acme-corp-lab.com` ‚Äî id√™ntica a `legacy_page.html`, pois redirecionava para essa p√°gina.
  - [resolved_subdomains.txt](./acme-corp/resolved_subdomains.txt): subdom√≠nios que resolveram em registros DNS v√°lidos (sa√≠da do **dnsx**).
  - [subdomains.txt](./acme-corp/subdomains.txt): lista de subdom√≠nios identificados com o **Subfinder**.
  - [target_ips.txt](./acme-corp/target_ips.txt): mapeamento dos IPs descobertos, usado como refer√™ncia para labs subsequentes.

<a name="item3.2"><h4>3.2 Lab 2: Descobrindo os Segredos dos Servidores Web</h4></a>[Back to summary](#item3)   
[Material do Lab](https://github.com/Kensei-CyberSec-Lab/formacao-cybersec/tree/main/modulo3-ethical-hacking/lab_2)

Obs.: Laborat√≥rio registrado como 2, documento como 2 e referente a aula 2.

<details><summary><strong>Ambiente de Laborat√≥rio</strong></summary>
  <ul>
    <li><details><summary><strong>Docker Compose</strong></summary>
        <ul>
          <li><details><summary><strong>services:</strong></summary>
            <ul>
              <li><details><summary><strong>kali:</strong></summary>
                <ul>
                  <li><strong>build:</strong>
                    <ul>
                      <li><code>context: .</code>: Contexto da build √© o diret√≥rio atual.</li>
                      <li><code>dockerfile: kali.Dockerfile</code>: Usa o arquivo <code>kali.Dockerfile</code> para construir a imagem.</li>
                    </ul>
                  </li>
                  <li><strong>container_name:</strong> Define o nome do container como <code>kensei_kali</code>.</li>
                  <li><code>tty: true</code>: Permite alocar um terminal interativo para o container.</li>
                  <li><code>stdin_open: true</code>: Mant√©m o STDIN aberto para uso com <code>docker exec -it</code>.</li>
                  <li><strong>volumes:</strong>
                    <ul>
                      <li><code>- ./labs:/home/kali/labs</code>: Monta o diret√≥rio local <code>./labs</code> dentro do container em <code>/home/kali/labs</code>, facilitando desenvolvimento e uso de scripts.</li>
                    </ul>
                  </li>
                  <li><strong>command:</strong> <code>/bin/bash</code>: Inicia o shell Bash, mantendo o container pronto para uso.</li>
                </ul>
              </details></li>
              <li><details><summary><strong>spiderfoot:</strong></summary>
                <ul>
                  <li><strong>build:</strong>
                    <ul>
                      <li><code>context: .</code>: Define o diret√≥rio atual como contexto da build.</li>
                      <li><code>dockerfile: Dockerfile.spiderfoot</code>: Usa o Dockerfile dedicado do SpiderFoot para construir a imagem.</li>
                    </ul>
                  </li>
                  <li><strong>container_name:</strong> Define o nome do container como <code>kensei_spiderfoot</code>.</li>
                  <li><strong>ports:</strong>
                    <ul>
                      <li><code>"5001:5001"</code>: Exp√µe a interface web do SpiderFoot na porta 5001 do host.</li>
                    </ul>
                  </li>
                  <li><strong>volumes:</strong>
                    <ul>
                      <li><code>- ./spiderfoot-data:/root/.spiderfoot</code>: Monta o diret√≥rio local <code>./spiderfoot-data</code> dentro do container em <code>/root/.spiderfoot</code>, garantindo que configura√ß√µes, resultados e dados do SpiderFoot sejam persistidos entre reinicializa√ß√µes do container.</li>
                    </ul>
                  </li>
                </ul>
              </details></li>
              <li><details><summary><strong>neo4j:</strong></summary>
                <ul>
                  <li><strong>image:</strong> Usa a imagem oficial <code>neo4j:4.4</code>.</li>
                  <li><strong>container_name:</strong> Define o nome do container como <code>kensei_neo4j</code>.</li>
                  <li><strong>environment:</strong>
                    <ul>
                      <li><code>NEO4J_AUTH=neo4j/test</code>: Define usu√°rio e senha iniciais (<code>neo4j</code> / <code>test</code>).</li>
                      <li><code>NEO4J_dbms_memory_heap_initial__size=512m</code>: Define o tamanho inicial do heap de mem√≥ria do Neo4j como 512 MB.</li>
                      <li><code>NEO4J_dbms_memory_heap_max__size=1g</code>: Define o tamanho m√°ximo do heap de mem√≥ria do Neo4j como 1 GB.</li>
                    </ul>
                  </li>
                  <li><strong>ports:</strong>
                    <ul>
                      <li><code>"7474:7474"</code>: Mapeia a porta 7474 do container para a porta 7474 do host, permitindo acesso √† interface web do Neo4j via navegador.</li>
                      <li><code>"7687:7687"</code>: Mapeia a porta 7687 do container para a porta 7687 do host, utilizada pelo Bolt protocol para conex√£o de drivers e aplica√ß√µes ao Neo4j.</li>
                    </ul>
                  </li>
                  <li><strong>volumes:</strong>
                    <ul>
                      <li><code>- ./neo4j-data:/data</code>: Monta o diret√≥rio local <code>./neo4j-data</code> dentro do container em <code>/data</code>, garantindo que o banco de dados Neo4j seja persistido no host entre reinicializa√ß√µes do container.</li>
                    </ul>
                  </li>
                </ul>
              </details></li>
            </ul>
          </details></li>
          <li><details><summary><strong>networks:</strong></summary>
            <ul>
              <li><code>default:</code>
                <ul>
                  <li><strong>name:</strong> <code>kensei_lab_net</code>: Nomeia a rede padr√£o usada pelos servi√ßos, garantindo comunica√ß√£o entre containers dentro dessa rede.</li>
                </ul>
              </li>
            </ul>
          </details></li>
        </ul>
      </details></li>
    <li><details><summary><strong>Dockerfile</strong></summary>
      <ul>
        <li><details><summary><strong>Dockerfile.kali</strong></summary>
          <ul>
            <li><code>FROM kalilinux/kali-rolling</code>: Imagem base Kali Rolling.</li>
            <li><strong>RUN:</strong> Executa a instala√ß√£o de ferramentas essenciais e limpa o cache para reduzir o tamanho da imagem:
              <ul>
                <li><code>apt-get update</code>: Atualiza a lista de pacotes dispon√≠veis.</li>
                <li><code>apt-get install -y git curl jq python3-pip build-essential golang-go amass</code>: Instala ferramentas essenciais de desenvolvimento, rede e pentest.</li>
                <li><code>apt-get clean && rm -rf /var/lib/apt/lists/*</code>: Remove arquivos tempor√°rios e limpa cache do apt.</li>
              </ul>
            </li>
            <li><code>ENV GOPATH=/root/go</code>: Define a vari√°vel <code>GOPATH</code> apontando para <code>/root/go</code>, diret√≥rio onde o Go instalar√° pacotes e bin√°rios do usu√°rio.</li>
            <li><code>ENV PATH=$PATH:/root/go/bin</code>: Adiciona <code>/root/go/bin</code> ao <code>PATH</code>, permitindo executar ferramentas instaladas via <code>go install</code>.</li>
            <li><code>RUN mkdir -p $GOPATH</code>: Cria diret√≥rio do GOPATH.</li>
            <li><strong>RUN:</strong> Instala ferramentas Go no <code>GOPATH</code> utilizando <code>go install ...@latest</code> e disponibiliza os bin√°rios em <code>/root/go/bin</code>:
              <ul>
                <li><code>go install github.com/projectdiscovery/subfinder/v2/cmd/subfinder@latest</code>: Instala o <strong>subfinder</strong>, usado para descoberta de subdom√≠nios.</li>
                <li><code>go install github.com/projectdiscovery/httpx/cmd/httpx@latest</code>: Instala o <strong>httpx</strong>, utilizado para verifica√ß√£o e coleta de informa√ß√µes HTTP (status, headers, t√≠tulos, etc.).</li>
                <li><code>go install github.com/projectdiscovery/nuclei/v2/cmd/nuclei@latest</code>: Instala o <strong>nuclei</strong>, motor de scan de vulnerabilidades baseado em templates.</li>
                <li><code>go install github.com/hakluke/hakrawler@latest</code>: Instala o <strong>hakrawler</strong>, um crawler r√°pido para descoberta de endpoints e conte√∫do web.</li>
                <li><code>go install github.com/zricethezav/gitleaks/v8@latest</code>: Instala o <strong>gitleaks</strong>, ferramenta para detec√ß√£o de segredos e chaves em reposit√≥rios.</li>
              </ul>
            </li>
            <li><code>COPY scripts /home/kali/scripts</code>: Copia scripts locais para dentro do container.</li>
            <li><code>WORKDIR /home/kali</code>: Define diret√≥rio de trabalho.</li>
            <li><code>CMD ["/bin/bash"]</code>: Inicia o shell Bash.</li>
          </ul>
        </details></li>
        <li><details><summary><strong>Dockerfile.spiderfoot</strong></summary>
          <ul>
            <li><code>FROM python:3.10-slim</code>: Usa a imagem base Python 3.10 slim como ambiente inicial.</li>
            <li><strong>RUN</strong>:
              <ul>
                <li><code>apt-get update</code>: Atualiza a lista de pacotes.</li>
                <li><code>apt-get install -y --no-install-recommends git build-essential python3-dev libyaml-dev curl ca-certificates gcc g++ make libffi-dev libssl-dev</code>: Instala depend√™ncias do sistema necess√°rias para compilar e executar as depend√™ncias Python do SpiderFoot.</li>
                <li><code>rm -rf /var/lib/apt/lists/*</code>: Remove listas de pacotes para reduzir o tamanho final da imagem.</li>
              </ul>
            </li>
            <li><code>RUN pip3 install -U pip setuptools wheel cython</code>: Atualiza o gerenciador de pacotes Python e instala ferramentas de build (necess√°rias para compilar extens√µes como PyYAML).</li>
            <li><code>WORKDIR /app</code>: Define o diret√≥rio de trabalho para os comandos seguintes.</li>
            <li><code>RUN git clone --depth=1 --branch v4.0 https://github.com/smicallef/spiderfoot /app</code>: Clona a vers√£o 4.0 do reposit√≥rio SpiderFoot diretamente para <code>/app</code>.</li>
            <li><code>RUN sed -i 's/pyyaml>=5.4.1,<6/pyyaml>=6.0/' requirements.txt</code>: Altera a especifica√ß√£o do PyYAML no <code>requirements.txt</code> para uma vers√£o compat√≠vel (quando necess√°rio) antes da instala√ß√£o das depend√™ncias.</li>
            <li><code>RUN pip3 install -r requirements.txt</code>: Instala as depend√™ncias Python do SpiderFoot listadas em <code>requirements.txt</code>.</li>
            <li><code>EXPOSE 5001</code>: Exp√µe a porta 5001, usada pela interface web do SpiderFoot.</li>
            <li><code>CMD ["python3", "sf.py", "-l", "0.0.0.0:5001"]</code>: Comando padr√£o para iniciar o SpiderFoot, fazendo-o escutar em todas as interfaces na porta 5001.</li>
          </ul>
        </details></li>
      </ul>
    </details></li>
  </ul>
</details>



Este segundo laborat√≥rio foi sequ√™ncia do laborat√≥rio anterior e montou o ambiente conforme tinha sido finalizado o lab anterior. Ou seja, os arquivos j√° criados estavam todos no container e o mesmo diret√≥tio, `acme-corp`, seria utilizado para armazenar novos arquivos gerados. O ambiente **Docker** teve algumas altera√ß√µes que n√£o influenciavam a execu√ß√£o ou continua√ß√£o do lab. Apenas o container **Kali Linux** era utilizado nesse lab, enquanto os demais n√£o foram implantados pois n√£o era necess√°rios.

Com a execu√ß√£o do OSINT (footprinting passivo e ativo, de forma n√£o agressiva) foram coletadas apenas informa√ß√µes p√∫blicas. Neste lab, aprofundou-se a investiga√ß√£o no sistema da Acme Corp para identificar servi√ßos e vetores potenciais ‚Äî etapa que marca o limiar entre a√ß√µes permitidas e n√£o permitidas em ambientes reais. Em produ√ß√£o, qualquer verifica√ß√£o intrusiva exige autoriza√ß√£o do respons√°vel pelo sistema; neste caso, por se tratar de um laborat√≥rio controlado, a continua√ß√£o foi autorizada pelos instrutores do curso.

Antes de executar os comandos, acessou-se o container de ataque com `docker exec -it kensei_kali /bin/bash` e navegou-se at√© a pasta de investiga√ß√£o da Acme Corp com `cd /home/kali/investigations/acme-corp`, onde j√° estavam os arquivos gerados durante o primeiro lab. Para confirmar a exist√™ncia do arquivo `target_ips.txt`, executou-se `ls -la target_ips.txt`; se nada fosse listado, o arquivo n√£o existia e era necess√°rio criar um com os tr√™s IPs dos servidores identificados e o dom√≠nio `www.acme-corp-lab.com`.

Em seguida, dentro de `acme-corp` criou-se o diret√≥rio [results](./acme-corp/results/) e, nele, uma pasta para cada alvo, nomeada com o IP ou dom√≠nio correspondente. Para simplificar a organiza√ß√£o e evitar nomes longos, adicionou-se ao `target_ips.txt` um mapeamento que relacionava cada IP/dom√≠nio a uma nomenclatura padr√£o e sucinta (ex.: `ip1`, `ip2`, ...). A cria√ß√£o de pastas, subpastas e arquivos foi baseada nesse mapeamento. A estrutura ficou assim:
- [acme-corp](./acme-corp/):
  - [results](./acme-corp/results/) (`mkdir -p results`):
    - [ip1](./acme-corp/results/ip1/) (`mkdir -p results/ip1`): `www.acme-corp-lab.com` ‚Äî dom√≠nio do site principal.
    - [ip2](./acme-corp/results/ip2/) (`mkdir -p results/ip2`): `3.94.82.59` ‚Äî IP do servidor do sistema Legacy.
    - [ip3](./acme-corp/results/ip3/) (`mkdir -p results/ip3`): `34.207.53.34` ‚Äî IP do servidor de desenvolvimento.
    - [ip4](./acme-corp/results/ip4/) (`mkdir -p results/ip4`): `54.152.245.201` ‚Äî IP do servidor de administra√ß√£o.

O arquivo [target_ips.txt](./acme-corp/target_ips.txt) trazia o mapeamento dos tr√™s IPs dos servidores descobertos, al√©m do dom√≠nio do site principal. Esse arquivo serviu de base para um reconhecimento mais agressivo ‚Äî ou seja, atividades com maior intera√ß√£o sobre os alvos, pass√≠veis de detec√ß√£o por sistemas de defesa. Para cada IP realizou-se varredura de portas (identifica√ß√£o de portas abertas, servi√ßos, vers√µes, banners e poss√≠vel sistema operacional), enumera√ß√£o de diret√≥rios e an√°lise dos endpoints de API. Todas as novas informa√ß√µes foram registradas no relat√≥rio existente ([investigation_report.md](./acme-corp/investigation_report.md)), e os arquivos gerados foram salvos na pasta correspondente a cada alvo.

üöÄ Passo 1 - Reconhecimento R√°pido de Portas   
Para o scan de portas foram utilizado tr√™s estrat√©gias. A primeira delas com o **Nmap** para uma varredura das 1.000 portas mais comuns (r√°pido e eficiente). A estrat√©gia 2 foi utilizando o **Rustscan** para descoberta r√°pida de portas n√£o-padr√£o/altas. Enquanto a √∫ltima foi novamente com o **Nmap** focando em portas web comuns, √∫til para pentesting de aplica√ß√µes web. Abaixo seguem os comandos executados, separados por alvo:
- **3.94.82.59 (ip2)**:
  - Estrat√©gia 1: `nmap -sT --top-ports 1000 3.94.82.59 -oN results/ip2/nmap_top1000_ip2.txt`
  - Estrat√©gia 2: `rustscan -a 3.94.82.59 --ulimit 5000 -- -sT -T4 -oA results/ip2/rustscan_ip2.txt`
  - Estrat√©gia 3: `nmap -sT -T4 -p 80,443,3000,8080,8443,8000,9000 3.94.82.59 -oN results/ip2/nmap_web_ip2.txt`
- **34.207.53.34 (ip3)**:
  - Estrat√©gia 1: `nmap -sT --top-ports 1000 34.207.53.34 -oN results/ip3/nmap_top1000_ip3.txt`
  - Estrat√©gia 2: `rustscan -a 34.207.53.34 --ulimit 5000 -- -sT -T4 -oA results/ip3/rustscan_ip3.txt`
  - Estrat√©gia 3: `nmap -sT -T4 -p 80,443,3000,8080,8443,8000,9000 34.207.53.34 -oN results/ip3/nmap_web_ip3.txt`
- **54.152.245.201 (ip4)**:
  - Estrat√©gia 1: `nmap -sT --top-ports 1000 54.152.245.201 -oN results/ip4/nmap_top1000_ip4.txt`
  - Estrat√©gia 2: `rustscan -a 54.152.245.201 --ulimit 5000 -- -sT -T4 -oA results/ip4/rustscan_ip4.txt`
  - Estrat√©gia 3: `nmap -sT -T4 -p 80,443,3000,8080,8443,8000,9000 54.152.245.201 -oN results/ip4/nmap_web_ip4.txt`

<div align="center"><figure>
    <img src="../0-aux/md3-img20.png" alt="img20"><br>
    <figcaption>Imagem 20.</figcaption>
</figure></div><br>

<div align="center"><figure>
    <img src="../0-aux/md3-img25.png" alt="img25"><br>
    <figcaption>Imagem 25.</figcaption>
</figure></div><br>

Cada comando gerou um arquivo ‚Äî como foram tr√™s comandos por alvo e quatro alvos, isso resultou em 12 arquivos no total. Para visualizar o conte√∫do de qualquer um deles, foi utilizado o **Cat** passando o caminho para o arquivo. A seguir est√° a lista dos arquivos gerados, os comandos para visualiza√ß√£o e os principais resultados obtidos:
- **3.94.82.59 (ip2)**:
  - `nmap_top1000_ip2.txt` (`cat results/ip2/nmap_top1000_ip2.txt`): 
  - `rustscan_ip2.txt` (`cat results/ip2/rustscan_ip2.txt`): 
  - `nmap_web_ip2.txt` (`cat results/ip2/nmap_web_ip2.txt`): 
- **34.207.53.34 (ip3)**:
  - `nmap_top1000_ip3.txt` (`cat results/ip3/nmap_top1000_ip3.txt`): 
  - `rustscan_ip3.txt` (`cat results/ip3/rustscan_ip3.txt`): 
  - `nmap_web_ip3.txt` (`cat results/ip3/nmap_web_ip3.txt`): 
- **54.152.245.201 (ip4)**:
  - `nmap_top1000_ip4.txt` (`cat results/ip4/nmap_top1000_ip4.txt`):
  - `rustscan_ip4.txt` (`cat results/ip4/rustscan_ip4.txt`):
  - `nmap_web_ip4.txt` (`cat results/ip4/nmap_web_ip4.txt`):


üîç Passo 2 ‚Äî Scan Detalhado de Servi√ßos   
Com as portas abertas e servi√ßos identificados, o pr√≥ximo passo foi executar varreduras detalhadas nessas portas para obter informa√ß√µes mais precisas e potenciais vetores de explora√ß√£o. Para isso utilizou-se o **Nmap** com scripts e detec√ß√£o de vers√£o: `nmap -sC -sV -p <portas> <alvo>`, onde `-sC` executava os scripts NSE padr√£o (verifica√ß√£o de banners, checks r√°pidos e detec√ß√£o de problemas conhecidos) e `-sV` tenta identificar vers√µes exatas dos servi√ßos em execu√ß√£o. Os resultados permitiram confirmar servi√ßos, vers√µes e poss√≠veis vulnerabilidades a serem investigadas nas etapas subsequentes. A lista abaixo exibe os comandos executados:
- **3.94.82.59 (ip2)**  
  - `nmap -sC -sV -p <ports> 3.94.82.59 -oN results/ip2/nmap_ip2_port.txt`
- **34.207.53.34 (ip3)**  
  - `nmap -sC -sV -p <ports> 34.207.53.34 -oN results/ip3/nmap_ip3_port.txt`
- **54.152.245.201 (ip4)**  
  - `nmap -sC -sV -p <ports> 54.152.245.201 -oN results/ip4/nmap_ip4_port.txt`

<div align="center"><figure>
    <img src="../0-aux/md3-img26.png" alt="img26"><br>
    <figcaption>Imagem 26.</figcaption>
</figure></div><br>


<div align="center"><figure>
    <img src="../0-aux/md3-img30.png" alt="img30"><br>
    <figcaption>Imagem 30.</figcaption>
</figure></div><br>

Novamente, cada comando gerou um arquivo ‚Äî agora com resultado por alvo e pelas portas especificadas. A seguir est√° a lista dos arquivos gerados, o comando para visualiza√ß√£o e um resumo dos principais achados extra√≠dos desses arquivos:
- **3.94.82.59 (ip2)**  
  - `nmap_ip2_port.txt` (`cat results/ip2/nmap_ip2_port.txt`): 
- **34.207.53.34 (ip3)**  
  - `nmap_ip3_port.txt` (`cat results/ip3/nmap_ip3_port.txt`): 
- **54.152.245.201 (ip4)**  
  - `nmap_ip4_port.txt` (`cat results/ip4/nmap_ip4_port.txt`): 

üåê Passo 3 - An√°lise Detalhada de Servi√ßos HTTP/HTTPS   
Nessa etapa, o foco foi nos servi√ßos web identificados nas varreduras anteriores. Com as portas e servi√ßos mapeados, separaram-se os servidores que estavam executando servi√ßos HTTP/HTTPS e foram usadas ferramentas para identificar tecnologias, t√≠tulos e c√≥digos de status, al√©m de obter impress√µes mais detalhadas sobre frameworks e vers√µes. Utilizou-se **httpx** para detec√ß√£o r√°pida de tecnologias (PHP, Node.js, etc.), t√≠tulo da p√°gina e c√≥digo HTTP, e **whatweb** para uma fingerprinting mais aprofundada (vers√µes de CMS, frameworks e bibliotecas). A lista abaixo mostra os comandos executados por alvo:
- **3.94.82.59 (ip2)**  
  - `httpx -u http://3.94.82.59 -title -tech-detect -status-code -o results/ip2/httpx_ip2.txt`
  - `whatweb -a 3 http://3.94.82.59 > results/ip2/whatweb_ip2.txt`
- **34.207.53.34 (ip3)**  
  - `httpx -u http://34.207.53.34 -title -tech-detect -status-code -o results/ip3/httpx_ip3.txt`
  - `whatweb -a 3 http://34.207.53.34 > results/ip3/whatweb_ip3.txt`
- **54.152.245.201 (ip4)**  
  - `httpx -u http://54.152.245.201 -title -tech-detect -status-code -o results/ip4/httpx_ip4.txt`
  - `whatweb -a 3 http://54.152.245.201 > results/ip4/whatweb_ip4.txt`

A seguir apresenta-se a lista dos arquivos gerados por esses comandos, o comando para visualiza√ß√£o de cada um e um resumo das principais informa√ß√µes extra√≠das de cada arquivo:
- **3.94.82.59 (ip2)**  
  - `httpx_ip2.txt` (`cat results/ip2/httpx_ip2.txt`): 
  - `whatweb_ip2.txt` (`cat results/ip2/whatweb_ip2.txt`): 
- **34.207.53.34 (ip3)**  
  - `httpx_ip3.txt` (`cat results/ip3/httpx_ip3.txt`): 
  - `whatweb_ip3.txt` (`cat results/ip3/whatweb_ip3.txt`): 
- **54.152.245.201 (ip4)**  
  - `httpx_ip4.txt` (`cat results/ip4/httpx_ip4.txt`): 
  - `whatweb_ip4.txt` (`cat results/ip4/whatweb_ip4.txt`): 

<div align="center"><figure>
    <img src="../0-aux/md3-img31.png" alt="img31"><br>
    <figcaption>Imagem 31.</figcaption>
</figure></div><br>

<div align="center"><figure>
    <img src="../0-aux/md3-img35.png" alt="img35"><br>
    <figcaption>Imagem 35.</figcaption>
</figure></div><br>

üìÅ Passo 4 ‚Äî Enumera√ß√£o de Diret√≥rios e Arquivos   
Aplica√ß√µes web frequentemente exp√µem diret√≥rios e arquivos sens√≠veis (backups, logs, arquivos de configura√ß√£o e at√© c√≥digo‚Äëfonte). Nesta etapa realizou‚Äëse a enumera√ß√£o de diret√≥rios e arquivos com **Gobuster**, que permite descobrir caminhos acess√≠veis diretamente, mas n√£o listados publicamente. Foram adotadas tr√™s abordagens complementares: (1) uso da wordlist padr√£o do **Gobuster**; (2) uso de uma wordlist personalizada; (3) busca por extens√µes espec√≠ficas com o par√¢metro `-x` para localizar arquivos como `.conf`, `.ini`, `.bak`, `.htaccess`, `robots.txt` e `sitemap.xml`, que frequentemente cont√™m dados sens√≠veis.

Como j√° havia uma `custom_wordlist.txt` criada em etapa anterior, gerou‚Äëse uma segunda wordlist (para evitar sobrescrever a original) chamada `custom_wordlist_extended.txt` com:  
`echo -e 'admin\napi\nbackup\nconfig\ndev\ngit\nlogin\nphpinfo\nphpmyadmin\ntest\nwww\nwp-admin\nwp-content\nwp-includes\nuploads\nfiles\nimages\ncss\njs\nassets\n.htaccess\nrobots.txt\nsitemap.xml' > custom_wordlist_extended.txt`.

A seguir, os comandos executados por alvo s√£o listados:
- **3.94.82.59 (ip2)**  
  - `gobuster dir -u http://3.94.82.59 -w /usr/share/wordlists/dirb/common.txt -o results/ip2/gobuster_ip2.txt -q`
  - `gobuster dir -u http://3.94.82.59 -w custom_wordlist.txt -o results/ip2/gobuster_custom_ip2.txt -q`
  - `gobuster dir -u http://3.94.82.59 -w /usr/share/wordlists/dirb/common.txt -x php,html,txt,conf,ini,bak,log -o results/ip2/gobuster_files_ip2.txt -q`
- **34.207.53.34 (ip3)**  
  - `gobuster dir -u http://34.207.53.34 -w /usr/share/wordlists/dirb/common.txt -o results/ip3/gobuster_ip3.txt -q`
  - `gobuster dir -u http://34.207.53.34 -w custom_wordlist.txt -o results/ip3/gobuster_custom_ip3.txt -q`
  - `gobuster dir -u http://34.207.53.34 -w /usr/share/wordlists/dirb/common.txt -x php,html,txt,conf,ini,bak,log -o results/ip3/gobuster_files_ip3.txt -q`
- **54.152.245.201 (ip4)**  
  - `gobuster dir -u http://54.152.245.201 -w /usr/share/wordlists/dirb/common.txt -o results/ip4/gobuster_ip4.txt -q`
  - `gobuster dir -u http://54.152.245.201 -w custom_wordlist.txt -o results/ip4/gobuster_custom_ip4.txt -q`
  - `gobuster dir -u http://54.152.245.201 -w /usr/share/wordlists/dirb/common.txt -x php,html,txt,conf,ini,bak,log -o results/ip4/gobuster_files_ip4.txt -q`

Essas abordagens permitiram mapear diret√≥rios p√∫blicos, localizar arquivos √∫teis para investiga√ß√£o e identificar potenciais fontes de credenciais e configura√ß√µes expostas. Como de costume, cada comando gerava um arquivo diferente. A lista abaixo mostra os arquivos gerados o comando para visualiza√ß√£o de cada um e um resumo das principais informa√ß√µes extra√≠das de cada arquivo:
- **3.94.82.59 (ip2)**  
  - `gobuster_ip2.txt` (`cat results/ip2/gobuster_ip2.txt`): 
  - `gobuster_custom_ip2.txt` (`cat results/ip2/gobuster_custom_ip2.txt`): 
  - `gobuster_files_ip2.txt` (`cat results/ip2/gobuster_files_ip2.txt`): 
- **34.207.53.34 (ip3)**  
  - `gobuster_ip3.txt` (`cat results/ip3/gobuster_ip3.txt`): 
  - `gobuster_custom_ip3.txt` (`cat results/ip3/gobuster_custom_ip3.txt`): 
  - `gobuster_files_ip3.txt` (`cat results/ip3/gobuster_files_ip3.txt`): 
- **54.152.245.201 (ip4)**  
  - `gobuster_ip4.txt` (`cat results/ip4/gobuster_ip4.txt`): 
  - `gobuster_custom_ip4.txt` (`cat results/ip4/gobuster_custom_ip4.txt`): 
  - `gobuster_files_ip4.txt` (`cat results/ip4/gobuster_files_ip4.txt`): 

<div align="center"><figure>
    <img src="../0-aux/md3-img36.png" alt="img36"><br>
    <figcaption>Imagem 36.</figcaption>
</figure></div><br>

<div align="center"><figure>
    <img src="../0-aux/md3-img40.png" alt="img40"><br>
    <figcaption>Imagem 40.</figcaption>
</figure></div><br>















<a name="item3.3"><h4>3.3 Firewall & ACL</h4></a>[Back to summary](#item3)   
[Material do Lab](https://github.com/Kensei-CyberSec-Lab/formacao-cybersec/tree/main/modulo3-ethical-hacking/lab_3)






<a name="item3.4"><h4>3.4 IDS e IPS</h4></a>[Back to summary](#item3)   
[Material do Lab](https://github.com/Kensei-CyberSec-Lab/formacao-cybersec/tree/main/modulo3-ethical-hacking)

A aula 4 n√£o teve nenhum laborat√≥rio ou o laborat√≥rio ainda n√£o foi constru√≠do pelo professor do curso.


<a name="item3.5"><h4>3.5 Monitoramento de Logs</h4></a>[Back to summary](#item3)   
[Material do Lab](https://github.com/Kensei-CyberSec-Lab/formacao-cybersec/tree/main/modulo3-ethical-hacking)

A aula 5 n√£o teve nenhum laborat√≥rio ou o laborat√≥rio ainda n√£o foi constru√≠do pelo professor do curso.

<a name="item3.6"><h4>3.6 Patch Management</h4></a>[Back to summary](#item3)   
[Material do Lab](https://github.com/Kensei-CyberSec-Lab/formacao-cybersec/tree/main/modulo3-ethical-hacking/lab_4)






<a name="item3.7"><h4>3.7 Cloud Security</h4></a>[Back to summary](#item3)   
[Material do Lab](https://github.com/Kensei-CyberSec-Lab/formacao-cybersec/tree/main/modulo3-ethical-hacking/lab_7)

A aula 7 n√£o teve nenhum laborat√≥rio ou o laborat√≥rio ainda n√£o foi constru√≠do pelo professor do curso.

<a name="item3.8"><h4>3.8 IAM e Permissionamento</h4></a>[Back to summary](#item3)   
[Material do Lab](https://github.com/Kensei-CyberSec-Lab/formacao-cybersec/tree/main/modulo3-ethical-hacking/lab_8)

A aula 8 n√£o teve nenhum laborat√≥rio ou o laborat√≥rio ainda n√£o foi constru√≠do pelo professor do curso.


<a name="item3.9"><h4>3.9 Container Security Docker Bench & Trivy</h4></a>[Back to summary](#item3)   
[Material do Lab](https://github.com/Kensei-CyberSec-Lab/formacao-cybersec/tree/main/modulo3-ethical-hacking/lab_5)








<a name="item3.10"><h4>3.10 NIST & Resposta a Incidentes</h4></a>[Back to summary](#item3)   
[Material do Lab](https://github.com/Kensei-CyberSec-Lab/formacao-cybersec/tree/main/modulo3-ethical-hacking/lab_6)
